import{u as w,l as m,H as k,o as r,c as d,a as e,t as l,d as p,F as _,b as C,L as h}from"./index.fc5747ff.js";import"./lodash.f74b790b.js";import{m as L,a as b}from"./formatData.16acd92b.js";const R={class:"text-center"},$=e("h1",{class:"my-4 text-3xl font-bold text-center text-gray-900"},"\u09AB\u09B2\u09BE\u09AB\u09B2",-1),E={class:"max-w-xl mx-auto my-3"},j={class:"form-control"},S={class:"mt-4"},U={key:0},A={class:"flex items-center justify-center w-10 h-10 font-semibold text-white bg-green-500 rounded-full"},B={class:"flex-1 ml-2 text-gray-900 md:ml-4"},T={class:"text-lg font-semibold"},N={class:"text-sm text-gray-500"},D={class:"flex items-center justify-center w-10 h-10 p-2 font-semibold text-center text-gray-900 rounded-full aspect-square"},F={key:1,class:"text-center"},O=e("button",{class:"btn loader btn-primary"},"Loading...",-1),P=[O],z={setup(V){const{getExam:v}=w(),c=v(),n=m([]),u=m([]);m(null),k();const x=async()=>{let{data:o}=await h.get(`/exam/${c._id}/leaderboard`);n.value=o.map((s,t)=>({position:t+1,duration:L(s.duration,c.duration*6e4),score:s.marks,name:s.user.name,attempt:s.attempt,college:s.user.institute})),u.value=n.value};x();const f=o=>{let s=o.target.value;s?u.value=n.value.filter(t=>t.name.toLowerCase().includes(s.toLowerCase())):u.value=n.value},g=async()=>{const o=prompt("Enter password to calculate result");await h.post(`/exam/${c._id}/calculate-result?password=${o}`),x()},y=()=>{let o=`Position,Name,College,Duration,Score
`;n.value.forEach(i=>{o+=`${i.position},${i.name},${i.college.replace(/\,/g," ")},${i.duration},${i.score}
`});const s=new Blob([o],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("hidden",""),a.setAttribute("href",t),a.setAttribute("download",`${c.title}.csv`),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),a.remove()};return(o,s)=>(r(),d(_,null,[e("div",R,[$,e("h2",null,l(p(c).title),1),e("h3",null," Total Participants: "+l(n.value.length),1)]),e("div",{class:"flex justify-between max-w-xl mx-auto my-5"},[e("button",{onClick:g,class:"px-5 py-2 font-semibold text-white bg-blue-500 rounded-md"}," Calculate Result "),e("button",{onClick:y,class:"px-5 py-2 font-semibold text-white bg-green-500 rounded-md"}," Export to CSV ")]),e("div",E,[e("div",j,[e("input",{placeholder:"\u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09B0\u09CD\u09A5\u09C0 \u0985\u09A5\u09AC\u09BE \u09B6\u09BF\u0995\u09CD\u09B7\u09BE\u09AA\u09CD\u09B0\u09A4\u09BF\u09B7\u09CD\u09A0\u09BE\u09A8\u09C7\u09B0 \u09A8\u09BE\u09AE \u09A6\u09BF\u09DF\u09C7 \u0996\u09C1\u0981\u099C\u09C1\u09A8... ",onKeyup:f,class:"rounded-md input input-bordered"},null,32)]),e("div",S,[n.value.length>0?(r(),d("div",U,[(r(!0),d(_,null,C(u.value,(t,a)=>(r(),d("div",{key:a,class:"flex items-center px-3 py-2 mb-2 border shadow-sm rounded-2xl"},[e("span",A,l(p(b)(t.position)),1),e("div",B,[e("h2",T,l(t.name),1),e("p",null,l(t.college),1),e("p",N," Attempts: "+l(t.attempt)+", \u09B8\u09AE\u09DF: "+l(t.duration)+" \u09AE\u09BF\u09A8\u09BF\u099F ",1)]),e("div",D,[e("span",null,l(p(b)(t.score)),1)])]))),128))])):(r(),d("div",F,P))])])],64))}};export{z as default};
